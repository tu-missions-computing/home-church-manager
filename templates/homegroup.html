{%  extends "base.html" %}

{% block title %} {{currentHomegroup.name}} Home {% endblock %}
{% block content %}

<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/data.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>
<div style="padding-top:20px; padding-bottom:20px; padding-left: 20px; float:left; width: 45%">
<h1 style="font-weight:bold;color:#E76245;">{{currentHomegroup.name}}</h1>
    <p><i>{{currentHomegroup.description}}</i></p>
    <p>{{currentHomegroup.location}}</p>
</div>


<!--<div id="container" style="width: 70%; height: 400px; margin: 0 auto"></div>-->
<div style="width:45%; float:right; height:400px; padding-top:100px; padding-right:5%">
    <h3 style="color:#2B75A0"> <strong>Attendance</strong></h3>
    <h4 style=" "><i>3 Most Recent Meetings</i></h4>
    <table class="table table-striped table-bordered table-hover results">
    <thead>
        <tr>
        <th></th>
        {% for date in dates %}
            <th>{{ date.date}}</th>
        {% endfor %}
        </tr>
        <tbody>
    {% for member in member_attendance %}
        <tr>
        <td>{{member[0]}}</td>
            {% if member[1] %}
                <td style="color:#E76245;"> <i class="fa fa-check-circle fa-2x" aria-hidden="true"></i></td>
            {% else %}
             <td style="color:#9ac9e4"><i class="fa fa-times-circle fa-2x" aria-hidden="true"></i> </td>
            {% endif %}
            {% if member[2] %}
            <td style="color:#E76245;" > <i class="fa fa-check-circle fa-2x" aria-hidden="true"></i></td>
            {% else %}
            <td style="color:#9ac9e4"><i class="fa fa-times-circle fa-2x" aria-hidden="true"></i> </td>
            {% endif %}
            {% if member[3] %}
            <td style="color:#E76245;"> <i class="fa fa-check-circle fa-2x" aria-hidden="true"></i></td>
            {% else %}
            <td style="color:#9ac9e4"><i class="fa fa-times-circle fa-2x" aria-hidden="true"></i> </td>
            {% endif %}

        </tr>

    {% endfor %}
</tbody>

    </tr>
    </thead>

</table>
</div>
<div id="line-chart" style="width:45%; height:400px; float:left"></div>
<table style="display:none" id="datatable">
    <thead>
        <tr>
            <th></th>
            <th>Home Group Attendance</th>
        </tr>
    </thead>
    <tbody>
    {% for attendance_record in attendance_count %}
        <tr>
            <th>{{attendance_record.month}}</th>
            <td>{{attendance_record.countMembers}}</td>
        </tr>
        </tr>
    {% endfor %}
    </tbody>
</table>



<script>


Highcharts.chart('line-chart', {
    chart: {
        type: 'line'
    },
    title: {
        text: 'Attendance Report'
    },
    subtitle: {
        text: 'Monthly'
    },
    yAxis: {
        title: {
            text: '# of people'
        }
    },
    data: {
        table: 'datatable'
    },
    plotOptions: {
        line: {
            dataLabels: {
                enabled: true
            },
            enableMouseTracking: false
        }
    },

});


</script>


<!--<table id="datatable" hidden>-->
    <!--<thead>-->
        <!--<tr>-->
            <!--<th></th>-->
            <!--<th>Date</th>-->
        <!--</tr>-->
    <!--</thead>-->
    <!--<tbody>-->
        <!--{% for attendance_record in attendance_count %}-->
        <!--<tr>-->
            <!--<th>{{ attendance_record.date }}</th>-->
            <!--<td>{{ attendance_record.countMembers}}</td>-->
        <!--</tr>-->
        <!--{% endfor %}-->

    <!--</tbody>-->
<!--</table>-->


<!--<script>-->
    <!--Highcharts.chart('container', {-->
        <!--data: {-->
            <!--table: 'datatable'-->
        <!--},-->
        <!--chart: {-->
            <!--type: 'column'-->
        <!--},-->
        <!--title: {-->
            <!--text: 'Total Attendance Counts'-->
        <!--},-->
        <!--yAxis: {-->
            <!--allowDecimals: false,-->
            <!--title: {-->
                <!--text: 'Attendance Count'-->
            <!--}-->
        <!--},-->
        <!--tooltip: {-->
            <!--formatter: function () {-->
                <!--return '<b>' + this.series.name + '</b><br/>' +-->
                    <!--this.point.y + ' ' + this.point.name.toLowerCase();-->
            <!--}-->
        <!--}-->
    <!--});-->
<!--</script>-->

</div>
{% endblock %}
